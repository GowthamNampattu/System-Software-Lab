#include <stdio.h>
#define MAX 100

int main() {
int f_no, s_no, i, j, page_fault = 0;
int frame[MAX], freq[MAX] = {0}, index[MAX] = {0};
int string[MAX];

printf("Enter the number of frames: ");
scanf("%d",&f_no);
printf("Enter the number of reference string: ");
scanf("%d",&s_no);

printf("Enter the reference string: ");
for (i = 0;i< s_no; i++)
scanf("%d", &string[i]);

int time = 0;

for (i =0;i<f_no;i++)
frame[i] = -1;

for (i=0;i<s_no;i++) {
int page = string[i];
int found = 0;

for (j =0;j<f_no;j++) {
if (frame[j] == page) {
freq[page]++;
found = 1;
break;
}
}

if (!found) {
int replace_index = -1;

for (j = 0; j < f_no; j++) {
if (frame[j] == -1) {
replace_index = j;
break;
}
}

if (replace_index == -1) {
int min_freq = 1e9, min_time = 1e9;
for (j = 0; j < f_no; j++) {
int p = frame[j];
if (freq[p] < min_freq || (freq[p] == min_freq && index[p] < min_time)) {
min_freq = freq[p];
min_time = index[p];
replace_index = j;
}
}
freq[frame[replace_index]] = 0;
}

frame[replace_index] = page;
freq[page] = 1;
index[page] = time++;
page_fault++;
}

printf("Frame: ");
for (j = 0; j < f_no; j++) {
if (frame[j] != -1)
printf("%d ", frame[j]);
else
printf("- ");
}
printf("\n");
}

printf("THE TOTAL PAGE FAULT IS : %d",page_fault );
return 0;
}
